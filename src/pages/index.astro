---
import Hero from "../components/Hero.astro";
import PhotoSlider from "../components/PhotoSlider.astro";
import Layout from "../layouts/Layout.astro";
---

<html lang="tr">
	<head>
		<meta charset="UTF-8" />
		<title>Kayrzex</title>
	</head>
	<body class="bg-neutral-950 text-white min-h-screen font-sans">
		<script>
			window.addEventListener("DOMContentLoaded", async () => {
				const splash = document.getElementById("splash");
				const nameSpan = document.getElementById("ip-name");
				try {
					const res = await fetch("https://ipinfo.io/json?token=demo");
					const data = await res.json();
					// IP'den isim alınamaz, şehir veya ülke alınabilir. Burada city kullanıyoruz.
					nameSpan.textContent = data.city ? `${data.city} - Kayrzex` : "Kayrzex";
				} catch {
					nameSpan.textContent = "Kayrzex";
				}
				setTimeout(() => {
					splash.classList.add("opacity-0", "pointer-events-none");
					setTimeout(() => splash.remove(), 600);
				}, 1800);
				document.getElementById("main-content")?.classList.add("animate-fadein");
			});
		</script>
		<!-- Splash Screen: 2021.svg ile Dodge Araba -->
		<div id="splash" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black transition-opacity duration-500">
			<div class="relative w-full max-w-[420px] h-auto flex items-end justify-center">
				<img src="/images/2021.svg" alt="Dodge Araba" class="w-full h-auto animate-car-move select-none pointer-events-none" draggable="false" />
			</div>
			<span id="ip-name" class="mt-8 text-2xl font-bold tracking-wide text-white transition-all duration-700">Kayrzex</span>
		</div>
		<!-- Ana içerik -->
		<div id="main-content" class="opacity-0 transition-opacity duration-700">
			<Layout>
				<Hero />
				<PhotoSlider />
			</Layout>
		</div>
		<style>
			.animate-fadein {
				opacity: 1 !important;
				transition: opacity 0.7s cubic-bezier(0.4,0,0.2,1);
			}
			@keyframes carMove {
				0% { transform: translateX(-30px); }
				60% { transform: translateX(30px); }
				100% { transform: translateX(0); }
			}
			.animate-car-move {
				animation: carMove 1.2s cubic-bezier(0.4,0,0.2,1) infinite alternate;
			}
		</style>
	</body>
</html>
